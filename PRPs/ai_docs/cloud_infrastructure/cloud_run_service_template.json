{
  "apiVersion": "serving.knative.dev/v1",
  "kind": "Service",
  "metadata": {
    "name": "example-service",
    "namespace": "default",
    "annotations": {
      "run.googleapis.com/client-name": "custom-agent",
      "run.googleapis.com/launch-stage": "GA"
    }
  },
  "spec": {
    "template": {
      "metadata": {
        "annotations": {
          "autoscaling.knative.dev/maxScale": "10",
          "autoscaling.knative.dev/minScale": "0",
          "run.googleapis.com/cpu-throttling": "true",
          "run.googleapis.com/sessionAffinity": "false"
        }
      },
      "spec": {
        "serviceAccountName": "example-sa@your-gcp-project.iam.gserviceaccount.com",
        "containerConcurrency": 80,
        "timeoutSeconds": 60,
        "containers": [
          {
            "name": "app-container",
            "image": "gcr.io/your-gcp-project/example-service:v1",
            "env": [
              { "name": "ENV1", "value": "value1" },
              { "name": "ENV2", "value": "value2" }
            ],
            "resources": {
              "limits": { "cpu": "1", "memory": "512Mi" }
            },
            "ports": [ { "containerPort": 8080 } ]
          },
          {
            "name": "sidecar-otel",
            "image": "otel/opentelemetry-collector:0.82.0",
            "args": ["--config=/etc/otel-collector-config.yaml"],
            "volumeMounts": [
              {
                "name": "otel-config",
                "mountPath": "/etc/otel-collector-config.yaml",
                "subPath": "config.yaml"
              }
            ],
            "resources": {
              "limits": { "cpu": "0.5", "memory": "256Mi" }
            }
          }
        ],
        "volumes": [
          {
            "name": "otel-config",
            "secret": {
              "secretName": "otel-config"
            }
          }
        ]
      }
    }
  }
}